<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" ie=edge">
    <title>FURKAN BAYSAK PASTANELERİ</title>
    <link rel="icon" type="image/x-icon" href="logo.png">
    <link rel="stylesheet" href="style.css">
    <style>
        /* CSS stilleri (önceki koddan - aynı kalacak) */
         .sube a {
            font-size: 16px;
            font-weight: bold;
            color: black;
            text-decoration: none;
            display: block;
            padding: 8px;
        }

        .sube a:hover {
            background-color: #f0f0f0;
        }

        .location-icon {
            margin-right: 8px;
        }

        /* Pasta Sipariş Alanı Stilleri (Güncellendi) */
        .pasta-siparis-section { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .pasta-siparis-section h2 { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .siparis-form { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .step { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .step.active { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-group { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-group label { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-group input, .form-group textarea, .form-group select { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-group select { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-group textarea { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-actions { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-actions button { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .form-actions button:hover{ /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */}
        .progress-bar-container { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */ }
        .progress-bar { /* ... (Pasta Sipariş Alanı Stilleri - önceki koddan) ... */}
        .kutular-container { /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */ }
        .kutu { /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */ }
        .kutu:hover{ /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */}
        .kutu img { /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */ }
        .kutu p { /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */ }
        .kutu a { /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */ }
        @media (min-width: 768px) { /* ... (Ürün Kutuları Stilleri - önceki koddan) ... */}
        .social-container { /* ... (Footer Sosyal Link Stili - önceki koddan) ... */ }
        .social-link { /* ... (Footer Sosyal Link Stili - önceki koddan) ... */ }
        .social-logo{ /* ... (Footer Sosyal Link Stili - önceki koddan) ... */ }
        .social-link span{ /* ... (Footer Sosyal Link Stili - önceki koddan) ... */}
          @media (min-width: 768px) { /* ... (Footer Sosyal Link Stili - önceki koddan) ... */}
    </style>
</head>
<body oncontextmenu="return false;">
    <!-- Üst Menü (Aynı Kalsın) -->
    <header>
        <div class="menu-icon" onclick="toggleMenu()">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <div class="logo-container">
            <img src="logo.png" alt="Furkan Baysak Pastaneleri Logo" class="logo">
            <h1>FURKAN BAYSAK</h1>
        </div>
    </header>

    <!-- Yandan Açılır Menü (Aynı Kalsın) -->
    <nav id="side-menu" class="hidden">
        <button class="close-btn" onclick="closeMenu()">X</button>
        <ul>
            <li><a href="#hakkinda">Hakkında</a></li>
            <li><a href="#urunler">Ürünler</a></li>
            <li><a href="#subeler">Şubeler</a></li>
            <li><a href="#pasta-siparis">Pasta Siparişi</a></li>
        </ul>
    </nav>

    <!-- Ana İçerik (Aynı Kalsın) -->
    <main>
        <!-- Fotoğraf Galerisi (Aynı Kalsın) -->
        <div class="slider-container">
            <div class="slider" id="slider">
                <img src="image1.png" alt="Galeri 1" class="slide">
                <img src="image2.png" alt="Galeri 2" class="slide">
            </div>
            <div class="dots">
                <span class="dot" onclick="setCurrentSlide(0)"></span>
                <span class="dot" onclick="setCurrentSlide(1)"></span>
                </div>
        </div>

        <section id="hakkinda" class="section-content">
            <h2>Hakkında</h2>
            <p>Kurulduğumuz ilk günden itibaren, en büyük önceliğimiz her zaman sizlerin memnuniyeti oldu. Sizin yüzünüzdeki gülümseme, bizim en değerli motivasyon kaynağımız ve bu yüzden her gün daha iyisini yapmak için çalışıyoruz. Bugün, bu tutkuyu 5 şehirde, tam 38 şubemizde sizlerle paylaşmanın gururunu yaşıyoruz. Her bir şubemizde, sadece bir pastane değil, aynı zamanda sıcak ve samimi bir buluşma noktası olmaya özen gösteriyoruz. Sıcacık bir atmosferde, mis gibi kokan pastalarımız ve tatlılarımız eşliğinde, güler yüzlü ekibimizle sizleri ağırlamaktan büyük bir heyecan duyuyoruz. Amacımız, her ziyaretinizde kendinizi özel ve evinizde hissetmenizi sağlamak. Bizim için her bir misafirimiz, ailemizin bir parçası gibidir. Yılların verdiği tecrübeyle, her bir lezzeti büyük bir titizlikle hazırlıyor, en taze malzemeleri kullanmaya özen gösteriyoruz. Çünkü biliyoruz ki, en güzel anılar, en güzel tatlarla birleşince unutulmaz olur. Furkan Baysak olarak, bu anılarınızda yer almaktan ve sizlere tatlı bir dokunuş katmaktan mutluluk duyuyoruz.</p>
        </section>

        <!-- Ürünler Bölümü (Aynı Kalsın) -->
       <section id="urunler" class="section-content">
        <h2>Ürünler</h2>
        <div class="kutular-container">
            <!-- ... (Ürün Kutuları - aynı kalacak) ... -->
        </div>
    </section>

        <!-- Şubeler Bölümü (Aynı Kalsın) -->
        <section id="subeler" class="section-content">
            <h2>Şubeler</h2>
            <div class="subeler-container">
                <!-- ... (Şube Linkleri - aynı kalacak) ... -->
            </div>
        </section>

        <!-- Pasta Sipariş Bölümü (Güncellendi) -->
        <section id="pasta-siparis" class="section-content pasta-siparis-section">
            <h2>Pasta Siparişi</h2>
            <div class="progress-bar-container">
                <div class="progress-bar" id="order-progress-bar"></div>
            </div>
            <form class="siparis-form" id="pastaSiparisForm">

                <div class="step active" data-step="1">
                    <div class="form-group">
                        <label for="musteri-adi">1. Müşteri Adı Soyadı <span style="color: red;">*</span></label>
                        <input type="text" id="musteri-adi" name="musteri-adi" required placeholder="Adınız ve Soyadınız">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="2">
                    <div class="form-group">
                        <label for="musteri-telefon">2. Müşteri Telefonu <span style="color: red;">*</span></label>
                        <input type="tel" id="musteri-telefon" name="musteri-telefon" required placeholder="Telefon Numaranız" maxlength="11">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(1)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="3">
                    <div class="form-group">
                        <label for="sube-adi">3. Şube Adı <span style="color: red;">*</span></label>
                        <input type="text" id="sube-adi" name="sube-adi" required placeholder="Sipariş vermek istediğiniz şube">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(2)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="4">
                    <div class="form-group">
                        <label for="pasta-boyutu">4. Pasta Boyutu <span style="color: red;">*</span></label>
                        <select id="pasta-boyutu" name="pasta-boyutu" required>
                            <option value="">Seçiniz</option>
                            <option value="1-nolu">1 Nolu (4-6 Kişilik)</option>
                            <option value="2-nolu">2 Nolu (8-10 Kişilik)</option>
                            <option value="3-nolu">3 Nolu (10-15 Kişilik)</option>
                        </select>
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(3)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="5">
                    <div class="form-group">
                        <label for="pasta-sekli">5. Pasta Şekli (Yuvarlak, Kare, Kalp vb.)</label>
                        <input type="text" id="pasta-sekli" name="pasta-sekli" placeholder="İstediğiniz pasta şeklini belirtin (yuvarlak, kare, kalp vb.)">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(4)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="6">
                    <div class="form-group">
                        <label for="ekstra-ara-kat">6. Ekstra Ara Kat</label>
                        <select id="ekstra-ara-kat" name="ekstra-ara-kat">
                            <option value="istemiyorum">İstemiyorum</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(5)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="7">
                    <div class="form-group">
                        <label for="kek-krema-farkliligi">7. Kek ve Krema Farklılığı</label>
                        <input type="text" id="kek-krema-farkliligi" name="kek-krema-farkliligi" placeholder="Kek veya krema için özel isteğiniz varsa belirtin">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(6)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="8">
                    <div class="form-group">
                        <label for="pasta-icerigi">8. Pasta İçeriği (Kuruyemiş, Çikolata, Meyveli vb.)</label>
                        <input type="text" id="pasta-icerigi" name="pasta-icerigi" placeholder="Pasta içeriği tercihinizi belirtin (kuruyemiş, çikolata, meyveli, full içerikli vb.)">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(7)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="9">
                    <div class="form-group">
                        <label for="pasta-kremasi">9. Pasta Kreması (Şanti, Sos, Şeker Hamuru)</label>
                        <input type="text" id="pasta-kremasi" name="pasta-kremasi" placeholder="Pasta kreması tercihinizi belirtin (şanti, sos, şeker hamuru)">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(8)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="10">
                    <div class="form-group">
                        <label for="pasta-rengi">10. Pasta Rengi</label>
                        <input type="text" id="pasta-rengi" name="pasta-rengi" placeholder="Pasta rengi tercihinizi belirtin">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(9)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="11">
                    <div class="form-group">
                        <label for="pasta-altligi">11. Pasta Altlığı (Mukavva, Şeker Hamuru, Ahşap)</label>
                        <input type="text" id="pasta-altligi" name="pasta-altligi" placeholder="Pasta altlığı tercihinizi belirtin (mukavva, şeker hamuru, ahşap)">
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(10)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="12">
                    <div class="form-group">
                        <label for="pasta-detaylari">12. Pasta Detayları (Eklemek istediğiniz özel notlar)<span style="color: red;">*</span></label>
                        <textarea id="pasta-detaylari" name="pasta-detaylari" rows="8" placeholder="Pasta ile ilgili eklemek istediğiniz detaylar, özel notlar" maxlength="800" required></textarea>
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(11)">Geri</button>
                        <button type="button" id="next-step">İleri</button>
                    </div>
                </div>

                <div class="step" data-step="13">
                    <div class="form-group">
                        <label for="notlar">13. Not (Eklemek istediğiniz notlar)<span style="color: red;">*</span></label>
                        <textarea id="notlar" name="notlar" rows="8" placeholder="Eklemek istediğiniz notlar" maxlength="800" required></textarea>
                    </div>
                     <div class="form-actions">
                        <button type="button" id="previous-step" onclick="updateFormStep(12)">Geri</button>
                        <button type="submit" id="submit-order">Siparişi Gönder</button>
                    </div>
                </div>
                 <div class="form-actions">
                    <button type="button" id="previous-step" >Geri</button>
                    <button type="button" id="next-step">İleri</button>
                    <button type="submit" id="submit-order" style="display: none;">Siparişi Gönder</button>
                </div>
            </form>
        </section>
    </main>

    <!-- Footer (Aynı Kalsın) -->
    <footer>
        <div class="social-container">
            <a href="https://www.instagram.com/furkanbaysakpastaneleri" target="_blank" class="social-link">
                <img src="instagram-logo.png" class="social-logo">
                <span>FURKANBAYSAKPASTANELERİ</span>
            </a>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "furkan-baysak-b74ef.firebaseapp.com",
            databaseURL: "https://furkan-baysak-b74ef-default-rtdb.firebaseio.com",
            projectId: "furkan-baysak-b74ef",
            storageBucket: "furkan-baysak-b74ef.firebasestorage.app",
            messagingSenderId: "332668884342",
            appId: "1:332668884342:web:975a46d869cf37bbc85657",
            measurementId: "G-1TQKFHW50T"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const steps = document.querySelectorAll('.step');
        const progressBar = document.getElementById('order-progress-bar');
        const prevButton = document.getElementById('previous-step');
        const nextButton = document.getElementById('next-step');
        const submitButton = document.getElementById('submit-order');
        let currentStep = 1;
        const totalSteps = steps.length;
        const form = document.getElementById('pastaSiparisForm');

        function updateFormStep(stepIndex) {
            steps.forEach(step => step.classList.remove('active'));
            steps[stepIndex - 1].classList.add('active');
            currentStep = stepIndex;

            const progressPercentage = ((stepIndex - 1) / (totalSteps - 1)) * 100;
            progressBar.style.width = `${isNaN(progressPercentage) ? 0 : progressPercentage}%`;

            prevButton.disabled = stepIndex === 1;
            nextButton.style.display = stepIndex === totalSteps ? 'none' : 'inline-block';
            submitButton.style.display = stepIndex === totalSteps ? 'inline-block' : 'none';
            nextButton.innerText = currentStep === totalSteps -1 ? 'Siparişi Gözden Geçir' : 'İleri';
             validateStep(stepIndex);
             if (stepIndex === 1) { // İlk adım kontrolü
                prevButton.style.display = 'none'; // İlk adımda geri butonunu gizle
            } else {
                prevButton.style.display = 'inline-block'; // Diğer adımlarda geri butonunu göster
            }
        }

         function validateStep(stepIndex) {
            let isValidStep = true;
            const currentStepElement = steps[stepIndex - 1];
            if (!currentStepElement) return true;

             const requiredFields = currentStepElement.querySelectorAll('[required]');
             for (let i = 0; i < requiredFields.length; i++) {
                const field = requiredFields[i];
                if (!field.value.trim()) {
                    isValidStep = false;
                    if (nextButton) nextButton.disabled = true;
                    return false;
                }
            }
            if (stepIndex === 2) { // Telefon numarası validasyonu sadece 2. adımda
                const phoneField = document.getElementById('musteri-telefon');
                if (!/^[0-9]{11}$/.test(phoneField.value.trim())) {
                    isValidStep = false;
                    if (nextButton) nextButton.disabled = true;
                    return false;
                }
            }


            if (nextButton) nextButton.disabled = !isValidStep;
            return isValidStep;
        }


        nextButton.addEventListener('click', () => {
            if (!validateStep(currentStep)) {
                 alert("Lütfen tüm zorunlu alanları doldurun!");
                return;
            }
            if (currentStep < totalSteps) {
                updateFormStep(currentStep + 1);
            }
        });

        prevButton.addEventListener('click', () => {
            if (currentStep > 1) {
                updateFormStep(currentStep - 1);
            }
        });

        updateFormStep(1);

        form.addEventListener('input', function(e) {
            validateStep(currentStep);
        });

        const phoneInput = document.getElementById('musteri-telefon');
        phoneInput.addEventListener('input', function (e) {
            this.value = this.value.replace(/[^0-9]/g, '');
            if (this.value.length > 11) {
                this.value = this.value.slice(0, 11);
            }
        });

        const orderForm = document.querySelector('.siparis-form');
        orderForm.addEventListener('submit', function(event) {
            event.preventDefault();

            if (!form.checkValidity()) {
                alert("Lütfen tüm zorunlu alanları doldurun.");
                return;
            }

            saveOrderToFirebase();
            progressBar.style.width = '100%';
        });

        function saveOrderToFirebase() {
            const musteriAdi = document.getElementById('musteri-adi').value;
            const musteriTelefon = document.getElementById('musteri-telefon').value;
            const subeAdi = document.getElementById('sube-adi').value;
            const pastaBoyutu = document.getElementById('pasta-boyutu').value;
            const pastaSekli = document.getElementById('pasta-sekli').value;
            const ekstraAraKat = document.getElementById('ekstra-ara-kat').value;
            const kekKremaFarkliligi = document.getElementById('kek-krema-farkliligi').value;
            const pastaIcerigi = document.getElementById('pasta-icerigi').value;
            const pastaKremasi = document.getElementById('pasta-kremasi').value;
            const pastaRengi = document.getElementById('pasta-rengi').value;
            const pastaAltligi = document.getElementById('pasta-altligi').value;
            const pastaDetaylari = document.getElementById('pasta-detaylari').value;
            const ornekPastaResmi = document.getElementById('ornek-pasta-resmi').value;
            const notlar = document.getElementById('notlar').value;

            const orderRef = database.ref('pasta-siparisleri/' + subeAdi + '/' + musteriAdi.replace(/\s/g, '_') + '_' + Date.now());

            orderRef.set({
                musteriAdi: musteriAdi,
                musteriTelefon: musteriTelefon,
                subeAdi: subeAdi,
                pastaBoyutu: pastaBoyutu,
                pastaSekli: pastaSekli,
                ekstraAraKat: ekstraAraKat,
                kekKremaFarkliligi: kekKremaFarkliligi,
                pastaIcerigi: pastaIcerigi,
                pastaKremasi: pastaKremasi,
                pastaRengi: pastaRengi,
                pastaAltligi: pastaAltligi,
                pastaDetaylari: pastaDetaylari,
                notlar: notlar,
                siparisTarihi: new Date().toLocaleString()
            }).then(() => {
                alert('Siparişiniz başarıyla gönderildi!');
                orderForm.reset();
                progressBar.style.width = '0%';
                updateFormStep(1);
            }).catch((error) => {
                console.error("Firebase'e yazma hatası:", error);
                alert('Sipariş gönderilirken bir hata oluştu. Lütfen tekrar deneyin.');
                progressBar.style.width = '0%';
            });
        }

        function toggleMenu() {
            const menu = document.getElementById('side-menu');
            menu.classList.toggle('open');
        }

        function closeMenu() {
            const menu = document.getElementById('side-menu');
            menu.classList.remove('open');
        }

        let currentSlide = 0;

        function setCurrentSlide(index) {
            currentSlide = index;
            updateSlider();
        }

        function updateSlider() {
            const slider = document.getElementById('slider');
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');

            // Slaytları kaydırma
            slider.style.transform = `translateX(-${currentSlide * 100}%)`;

            // Nokta aktifliğini güncelle
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
        }

        // Otomatik Kaydırma (İsteğe Bağlı)
        setInterval(() => {
            const slides = document.querySelectorAll('.slide');
            currentSlide = (currentSlide + 1) % slides.length;
            updateSlider();
        }, 5000);

    </script>
    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
    </script>
</body>
</html>
